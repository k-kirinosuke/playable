// Wait for the SDK to become ready
if (mraid.getState() === ‘loading’) {
 mraid.addEventListener(‘ready’, onSdkReady);
} else {
 onSdkReady();
}
function viewableChangeHandler(viewable) {
 // start/pause/resume gameplay, stop/play sounds
 if(viewable) {
 showMyAd();
 } else {
 // pause
 }
}

function onSdkReady() {
 mraid.addEventListener(‘viewableChange’, viewableChangeHandler);
 // Wait for the ad to become viewable for the first time
 if (mraid.isViewable()) {
 showMyAd();
 }
}
function showMyAd() {
mraid.open(url);
}

// Detect platform from user agent
var userAgent = navigator.userAgent || navigator.vendor;
var url = 'https://apps.apple.com/jp/app/id1176070496';
var android = 'https://play.google.com/store/apps/details?id=com.fundoshiparade.bokukoro3jp&hl=ja';
if (/android/i.test(userAgent)) {
 url = android;
}
